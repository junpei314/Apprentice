# 日報

7/24(月)

## 本日の目標

- Dockerコンテナの設定
- RedisとRDSへの接続設定
- アプリに接続できるようにする

## 学習時間

- 5h

## 目標の振り返り

- Dockerコンテナの設定
- RedisとRDSへの接続完了
- パブリックDNSからアプリに接続を確認

## 学んだこと

- AWS ElastiCache for Redis で利用できるエンドポイントは 4 つ。
    
    1. プライマリエンドポイント、2. リーダーエンドポイント、3. ノードエンドポイント、4. 設定エンドポイント
    
- Redis (クラスターモードが無効) クラスターに 1 つのみのノードがある場合、ノードのエンドポイントは読み取りと書き込みの両方に使用される。
- Redis (クラスターモードが無効) クラスターに複数のノードがある場合は、[プライマリエンドポイント]、[読み込みエンドポイント]、[ノードエンドポイント] の 3 種類のエンドポイントがある。
- プライマリエンドポイントは、常にクラスターのプライマリノードに解決される DNS 名。プライマリエンドポイントは、リードレプリカのプライマリロールへの昇格など、クラスターに対する変更の影響を受けない。
- 読み込みエンドポイントによって、ElastiCache for Redis クラスター内のすべてのリードレプリカ間でエンドポイントへの着信接続が均等に分割される。アプリケーションがいつ接続を作成するか、アプリケーションが接続をどのように (再) 利用するかなどの追加要因によって、トラフィックの分散が決定される。
- Unixソケット
    - 同一マシン内でのプロセス間通信 (IPC) のためのもの。Dockerコンテナは分離された環境であり、各コンテナはそれ自体が一つの「マシン」のように振る舞うため、Unixソケットを使用して異なるコンテナ間で通信することはできない。Unixソケットを使用して通信するためには、NginxとPumaは同じコンテナ内に存在する必要がある。
- TCP
    - ネットワークを介した通信に使用される、ネットワーク上の任意の2つのエンドポイント間で通信することができる。異なるコンテナが同じネットワークに接続されていれば、それらの間でTCPを使用して通信することができる。NginxとPumaを別々のコンテナとして運用する場合は、TCPを使用した通信が適している。

## 感想

- パブリックDNSからアプリに接続することができた。あとはメール送信のためのsmtpサーバーの設定をして、実際にメールかWebhookを利用したTeamsへのメッセージを送れるようにする

## 明日の目標

- SMTPサーバーの設定
